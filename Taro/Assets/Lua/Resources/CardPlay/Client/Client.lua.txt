require('CardPlay.Common.Poke')
local server = require('CardPlay.Server.Server')
require('CardPlay.Common.State')
require('CardPlay.Client.ReadyPanel')
require('CardPlay.Client.PlayCardPanel')

local Client = {}
local bridge = {}

function Client:UpdateUI_ReadyStep(data)
    ReadyPanel:UpdateUI_ReadyStep(self, data)
end

function Client:endReadyStep()
    ReadyPanel:EndReadyStep()
end

function Client:startDealStep()
    Client.state = State.deal
end

function Client:afterDeal_DealStep(data)
    PlayCardPanel:Show()
    PlayCardPanel:SetData_AfterDeal(data)
    bridge:C2S_Done_DealStep()
end

--绑定服务端，如果成功，会返回一个桥接对象
Client.state = State.ready
bridge = server:connectClient(Client)
Client.bridge = bridge
bridge:C2S_RequestData_ReadyStep()

function OnDispose()
    ReadyPanel:OnDipose()
end